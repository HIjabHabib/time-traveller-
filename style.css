/* --- Base Variables & Setup --- */
:root {
    --text-color: #333;
    --font-family: 'Arial', sans-serif; 
}

/* Base Body Styles - Centering, Transitions, and Position */
body {
    font-family: var(--font-family);
    min-height: 100vh;
    margin: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden; 
    color: var(--text-color);
    transition: background 1.5s ease-in-out, color 1.5s ease-in-out; 
    position: relative; /* CRITICAL: Needed for absolute positioning */
}

/* Pseudo-element for Stars Background (body::before) */
body::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 0; 
    opacity: 0; 
    transition: opacity 1.5s ease-in-out; 
    background: transparent; /* Ensures it doesn't block body background */
}

/* Common Pseudo-element for Animated Background Object (Sun/Moon) */
body::after {
    content: '';
    position: absolute;
    top: 0; /* Let the phase control the positioning */
    left: 0;
    width: 180px; 
    height: 180px;
    background-size: contain;
    background-repeat: no-repeat;
    z-index: 0; 
    opacity: 0; 
    /* Add smooth transition to properties being animated */
    transition: opacity 1.5s ease-in-out, background-color 1.5s ease-in-out, transform 1.5s ease-in-out; 
}


.container {
    text-align: center;
    width: 90%;
    max-width: 600px;
    z-index: 1; 
}

/* ... Content and Footer Styling (remains the same) ... */
#greeting {
    font-size: 3em;
    font-weight: 300; 
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0.2em;
    text-shadow: 1px 1px 5px rgba(0,0,0,0.2); 
}
#content-area p {
    font-size: 1.2em;
    opacity: 0.8;
}
footer {
    position: absolute;
    bottom: 20px;
    font-size: 0.9em;
    opacity: 0.7;
    z-index: 1;
}
#time-icon::before {
    font-size: 0.8em;
    margin-right: 15px;
    display: inline-block;
}

/* --- Keyframes --- */
@keyframes sunriseAnimation {
    0% { top: 120%; right: 0; opacity: 0; } 
    50% { top: 50%; left: 50%; opacity: 1; } 
    100% { top: 20%; right: 20%; left: auto; opacity: 1; }
}
@keyframes sunsetAnimation {
    0% { top: 20%; right: 20%; left: auto; opacity: 1; } 
    50% { top: 50%; left: 50%; opacity: 1; }
    100% { top: 120%; left: 0%; opacity: 0; } 
}
@keyframes moonTwinkle {
    0%, 100% { transform: scale(1) rotate(0deg); }
    25% { transform: scale(1.05) rotate(5deg); }
    75% { transform: scale(0.95) rotate(-5deg); }
}
@keyframes starTwinkle {
    0%, 100% { opacity: 0.8; }
    50% { opacity: 1; }
}

/* üåÖ MORNING */
.morning {
    --text-color: #554000;
    background: linear-gradient(to top right, #ffdd99, #ffb366); 
}
.morning #time-icon::before { content: "‚òÄÔ∏è"; }
.morning #greeting-text::before { content: "Good Morning! "; }
.morning body::after {
    opacity: 1;
    background-color: #ffeb3b;
    border-radius: 50%;
    animation: sunriseAnimation 8s ease-out forwards; 
}

/* ‚òÄÔ∏è AFTERNOON */
.afternoon {
    --text-color: #0d386d;
    background: linear-gradient(to bottom left, #87ceeb, #5cadff); 
}
.afternoon #time-icon::before { content: "‚õÖ"; }
.afternoon #greeting-text::before { content: "Good Afternoon! "; }
.afternoon body::after {
    opacity: 1;
    top: 20%; 
    right: 20%; 
    background-color: #ffeb3b;
    border-radius: 50%;
    /* Position is static, no animation needed */
}

/* üåá EVENING */
.evening {
    --text-color: #ffffff;
    background: linear-gradient(to top, #ff7f7f, #cc6699); 
}
.evening #time-icon::before { content: "üåÜ"; }
.evening #greeting-text::before { content: "Good Evening! "; }
.evening body::after {
    opacity: 1;
    background-color: #ff9800;
    border-radius: 50%;
    animation: sunsetAnimation 8s ease-out forwards; 
}

/* üåÉ NIGHT (Current Phase) */
.night {
    --text-color: #d1d1ff;
    background: linear-gradient(to bottom, #1a237e, #4c529d); 
}
.night #time-icon::before { content: "üåô"; }
.night #greeting-text::before { content: "Good Night! "; }

/* Animated Smiley Moon FIXES */
.night body::after {
    opacity: 1;
    top: 15%; 
    right: 15%; 
    left: auto; 
    
    background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="40" fill="%23fcfbe2"/><path d="M 30 40 Q 35 30 40 40 M 60 40 Q 65 30 70 40 M 35 65 Q 50 75 65 65" stroke="%23333" stroke-width="3" fill="none" stroke-linecap="round"/></svg>');
    background-color: transparent; 
    border-radius: 0;
    animation: moonTwinkle 10s ease-in-out infinite alternate;
}

/* Stars for Night FIXES */
.night body::before {
    opacity: 1; 
    /* Star Field Definition (x y blur size color) - using 1vw/1vh units for relative positioning */
    box-shadow: 
        10vw 80vh 2px 2px #fff,
        25vw 20vh 1px 1px #fff,
        45vw 50vh 2px 2px #fff,
        60vw 10vh 1px 1px #fff,
        80vw 60vh 2px 2px #fff,
        5vw 5vh 1px 1px #fff,
        90vw 90vh 1px 1px #fff,
        70vw 30vh 2px 2px #fff;
    animation: starTwinkle 8s ease-in-out infinite alternate; 
}
